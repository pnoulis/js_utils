var i=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var a=Object.prototype.hasOwnProperty;var f=(e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})},o=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of l(t))!a.call(e,r)&&r!==n&&i(e,r,{get:()=>t[r],enumerable:!(s=h(t,r))||s.enumerable});return e};var c=e=>o(i({},"__esModule",{value:!0}),e);var O={};f(O,{eventful:()=>u});module.exports=c(O);function u(e,t=[]){let s=e.prototype;Object.defineProperties(s,{events:{value:[...t,"error"],enumerable:!0,writable:!0},packageListener:{value:v,enumerable:!0,writable:!1},ensureEvent:{value:p,enumerable:!0,writable:!1},on:{value:b,enumerable:!0,writable:!1},once:{value:E,enumerable:!0,writable:!1},hasEvent:{value:w,enumerable:!0,writable:!1},flush:{value:m,enumerable:!0,writable:!1},emit:{value:g,enumerable:!0,writable:!1}})}function v(e,t={}){return{listener:e,persistent:t.persist??!0}}function p(e){if(!Object.hasOwn(this.events,e)){let t=new Error(`Unrecognized event: ${e}`);throw this.emit("error",t),t}}function b(e,t){return this.ensureEvent(e),this.events[e].push(this.packageListener(t,{persist:!0})),()=>this.flush(e,t)}function E(e,t){return this.ensureEvent(e),this.events[e].push(this.packageListener(t,{persist:!1})),()=>this.flush(e,t)}function w(e){return Object.hasOwn(this.events,e)}function m(e,t,n){return/^\*$/.test(e)?Object.keys(this.events).forEach(s=>this.flush(s,t,n)):(this.ensureEvent(e),typeof t=="function"?this.events[e]=this.events[e].filter(s=>s.listener!==t):typeof t=="string"?this.events[e]=this.events[e].filter(s=>s.id!==t):typeof n=="function"?this.events[e]=this.events[e].reduce((s,r)=>n(r)?s:[...s,r],[]):this.events[e]=[],this)}function g(e,...t){return this.ensureEvent(e),[...this.events[e]].forEach(n=>n.listener&&n.listener(...t)),this.events[e]=this.events[e].filter(({listener:n,persistent:s})=>s),this}u.construct=function(){let e={};for(let t=0;t<this.events.length;t++)e[this.events[t]]=[];this.events=e};
