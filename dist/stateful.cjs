var d=Object.create;var a=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var v=(e,t)=>{for(var n in t)a(e,n,{get:t[n],enumerable:!0})},c=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of p(t))!w.call(e,i)&&i!==n&&a(e,i,{get:()=>t[i],enumerable:!(r=b(t,i))||r.enumerable});return e};var S=(e,t,n)=>(n=e!=null?d(y(e)):{},c(t||!e||!e.__esModule?a(n,"default",{value:e,enumerable:!0}):n,e)),O=e=>c(a({},"__esModule",{value:!0}),e);var k={};v(k,{stateful:()=>m});module.exports=O(k);var j=S(require("is-number"),1);function f(...e){return e.length>1?e.map(t=>t.charAt(0).toUpperCase()+t.slice(1)):e[0].charAt(0).toUpperCase()+e[0].slice(1)}function g(e){let t=[];for(let n=1;n<e.length;n+=2)t.push(e[n]);return t}function h(e){let t=[];for(let n=0;n<e.length;n+=2)t.push(e[n]);return t}function s(e){return e!==null&&typeof e=="object"&&Array.isArray(e)===!1}function m(e,t=[]){let n=e,r=e.prototype,i=g(t),u=h(t);u.forEach((l,o)=>{Object.defineProperty(l.prototype,"name",{enumerable:!0,configurable:!0,get:function(){return i[o]}}),Object.defineProperty(l.prototype,"index",{enumerable:!0,configurable:!0,get:function(){return o}}),Object.defineProperty(r,`get${f(i[o])}State`,{enumerable:!0,configurable:!0,get:function(){return this.states[o]}})}),Object.defineProperty(n,"states",{value:i,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperties(r,{states:{value:u,enumerable:!0,writable:!0,configurable:!0},state:{value:null,enumerable:!0,configurable:!0,writable:!0},getState:{value:E,enumerable:!0,writable:!0,configurable:!0},setState:{value:z,enumerable:!0,writable:!0,configurable:!0},inState:{value:A,enumerable:!0,writable:!0,configurable:!0},compareStates:{value:M,enumerable:!0,writable:!0,configurable:!0}})}function E(e){if(e){let t=this.states.length;if(typeof e=="string"){for(let n=0;n<t;n++)if(this.states[n].name===e)return this.states[n]}else if(s(e)){for(let n=0;n<t;n++)if(this.states[n].name===e.name)return e}throw new Error(`Unrecognized state: ${e}`)}return this.state}function z(e){let t=this.state?.name;return typeof e=="string"&&(e=this.getState(e)),this.state=e,typeof this.emit=="function"&&s(this.events)&&this.emit("stateChange",this.state.name,t,this),"init"in this.state&&this.state.init(),this}function A(e){return e===this.state.name||e===this.state.index}function M(e){let t={},n=this.constructor.states.length;for(let r=0;r<n;r++)t[this.constructor.states[r]]=r;return e(t,this.state.index)}m.construct=function(){this.states=this.states.map(e=>new e(this)),this.state=this.states[0]};
